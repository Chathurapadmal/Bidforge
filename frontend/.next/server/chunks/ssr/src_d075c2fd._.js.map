{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///D:/Bidforge/frontend/src/lib/Config.ts"],"sourcesContent":["// src/lib/config.ts\r\nconst ORIGIN = (process.env.NEXT_PUBLIC_API_BASE_URL ?? \"\")\r\n  .trim()\r\n  .replace(/\\/+$/, \"\");\r\nexport const API_BASE = ORIGIN || \"\";\r\n\r\n/** For Option B, we can return relative '/uploads/...' to use the rewrite */\r\nexport function toImageSrc(img?: string | null): string {\r\n  const PH = \"/placeholder.png\";\r\n  if (!img) return PH;\r\n  let s = String(img).trim();\r\n  if (!s) return PH;\r\n  try {\r\n    s = decodeURIComponent(s);\r\n  } catch {}\r\n  if (/^https?:\\/\\//i.test(s)) return s;\r\n  // Prefer relative so Next rewrite handles it\r\n  return s.startsWith(\"/\") ? s : `/${s}`;\r\n}\r\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;;AACpB,MAAM,SAAS,CAAC,6DAAwC,EAAE,EACvD,IAAI,GACJ,OAAO,CAAC,QAAQ;AACZ,MAAM,WAAW,UAAU;AAG3B,SAAS,WAAW,GAAmB;IAC5C,MAAM,KAAK;IACX,IAAI,CAAC,KAAK,OAAO;IACjB,IAAI,IAAI,OAAO,KAAK,IAAI;IACxB,IAAI,CAAC,GAAG,OAAO;IACf,IAAI;QACF,IAAI,mBAAmB;IACzB,EAAE,OAAM,CAAC;IACT,IAAI,gBAAgB,IAAI,CAAC,IAAI,OAAO;IACpC,6CAA6C;IAC7C,OAAO,EAAE,UAAU,CAAC,OAAO,IAAI,CAAC,CAAC,EAAE,GAAG;AACxC","debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/Bidforge/frontend/src/app/buy/page.tsx"],"sourcesContent":["// src/app/buy/page.tsx\r\n\"use client\";\r\n\r\nimport useSWR from \"swr\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { API_BASE } from \"../../lib/Config\";\r\n\r\ntype AuctionCard = {\r\n  id: number;\r\n  title: string;\r\n  description?: string | null;\r\n  image?: string | null;\r\n  images?: string[] | null;\r\n  currentBid: number;\r\n  endTime?: string | null;\r\n  badge?: string | null;\r\n  createdAt: string;\r\n};\r\n\r\ntype AuctionsResponse = { items: AuctionCard[] };\r\n\r\nconst fetcher = async (url: string) => {\r\n  const res = await fetch(url, {\r\n    // GET is public; omit credentials\r\n    headers: { Accept: \"application/json\" },\r\n    cache: \"no-store\",\r\n  });\r\n  if (!res.ok) throw new Error(`${res.status} ${res.statusText}`);\r\n  return res.json();\r\n};\r\n\r\nexport default function BuyPage() {\r\n  const { data, error, isLoading } = useSWR<AuctionsResponse>(\r\n    // call relative URL so Next rewrites to backend\r\n    API_BASE + \"/api/auctions?sort=latest&limit=100\",\r\n    fetcher\r\n  );\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <main className=\"max-w-6xl mx-auto p-4\">\r\n        <h1 className=\"text-2xl font-semibold mb-4\">Auctions</h1>\r\n        <p className=\"text-gray-500\">Loading…</p>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <main className=\"max-w-6xl mx-auto p-4\">\r\n        <h1 className=\"text-2xl font-semibold mb-4\">Auctions</h1>\r\n        <p className=\"text-red-600 text-sm\">Failed to load auctions.</p>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  const items = data?.items ?? [];\r\n\r\n  return (\r\n    <main className=\"max-w-6xl mx-auto p-4\">\r\n      <h1 className=\"text-2xl font-semibold mb-4\">Auctions</h1>\r\n\r\n      {items.length === 0 ? (\r\n        <p className=\"text-gray-500\">No auctions yet.</p>\r\n      ) : (\r\n        <ul className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n          {items.map((a) => (\r\n            <li\r\n              key={a.id}\r\n              className=\"border rounded-xl overflow-hidden bg-white shadow-sm hover:shadow\"\r\n            >\r\n              <Link href={`/auction/${a.id}`} className=\"block\">\r\n                <div className=\"relative w-full h-48 bg-gray-100\">\r\n                  <Image\r\n                    src={a.image || \"/placeholder.png\"}\r\n                    alt={a.title}\r\n                    fill\r\n                    className=\"object-cover\"\r\n                  />\r\n                </div>\r\n                <div className=\"p-3\">\r\n                  <h3 className=\"font-semibold line-clamp-1\">{a.title}</h3>\r\n                  <p className=\"text-sm text-gray-500 line-clamp-2\">\r\n                    {a.description || \"—\"}\r\n                  </p>\r\n                  <div className=\"mt-2 text-sm\">\r\n                    <span className=\"font-medium\">Current:</span>{\" \"}\r\n                    {formatLKR(a.currentBid)}\r\n                  </div>\r\n                  {a.endTime && (\r\n                    <div className=\"text-xs text-gray-500\">\r\n                      Ends {new Date(a.endTime).toLocaleString()}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </Link>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n\r\nfunction formatLKR(n: number) {\r\n  try {\r\n    return new Intl.NumberFormat(\"en-LK\", {\r\n      style: \"currency\",\r\n      currency: \"LKR\",\r\n      maximumFractionDigits: 0,\r\n    }).format(n);\r\n  } catch {\r\n    return `LKR ${Math.round(n).toLocaleString()}`;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AAGvB;AACA;AACA;AACA;AALA;;;;;;AAqBA,MAAM,UAAU,OAAO;IACrB,MAAM,MAAM,MAAM,MAAM,KAAK;QAC3B,kCAAkC;QAClC,SAAS;YAAE,QAAQ;QAAmB;QACtC,OAAO;IACT;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,UAAU,EAAE;IAC9D,OAAO,IAAI,IAAI;AACjB;AAEe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,8JAAA,CAAA,UAAM,AAAD,EACtC,gDAAgD;IAChD,oHAAA,CAAA,WAAQ,GAAG,uCACX;IAGF,IAAI,WAAW;QACb,qBACE,8OAAC;YAAK,WAAU;;8BACd,8OAAC;oBAAG,WAAU;8BAA8B;;;;;;8BAC5C,8OAAC;oBAAE,WAAU;8BAAgB;;;;;;;;;;;;IAGnC;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAK,WAAU;;8BACd,8OAAC;oBAAG,WAAU;8BAA8B;;;;;;8BAC5C,8OAAC;oBAAE,WAAU;8BAAuB;;;;;;;;;;;;IAG1C;IAEA,MAAM,QAAQ,MAAM,SAAS,EAAE;IAE/B,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAG,WAAU;0BAA8B;;;;;;YAE3C,MAAM,MAAM,KAAK,kBAChB,8OAAC;gBAAE,WAAU;0BAAgB;;;;;qCAE7B,8OAAC;gBAAG,WAAU;0BACX,MAAM,GAAG,CAAC,CAAC,kBACV,8OAAC;wBAEC,WAAU;kCAEV,cAAA,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAM,CAAC,SAAS,EAAE,EAAE,EAAE,EAAE;4BAAE,WAAU;;8CACxC,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;wCACJ,KAAK,EAAE,KAAK,IAAI;wCAChB,KAAK,EAAE,KAAK;wCACZ,IAAI;wCACJ,WAAU;;;;;;;;;;;8CAGd,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAA8B,EAAE,KAAK;;;;;;sDACnD,8OAAC;4CAAE,WAAU;sDACV,EAAE,WAAW,IAAI;;;;;;sDAEpB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAAc;;;;;;gDAAgB;gDAC7C,UAAU,EAAE,UAAU;;;;;;;wCAExB,EAAE,OAAO,kBACR,8OAAC;4CAAI,WAAU;;gDAAwB;gDAC/B,IAAI,KAAK,EAAE,OAAO,EAAE,cAAc;;;;;;;;;;;;;;;;;;;uBAvB3C,EAAE,EAAE;;;;;;;;;;;;;;;;AAkCvB;AAEA,SAAS,UAAU,CAAS;IAC1B,IAAI;QACF,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;YACpC,OAAO;YACP,UAAU;YACV,uBAAuB;QACzB,GAAG,MAAM,CAAC;IACZ,EAAE,OAAM;QACN,OAAO,CAAC,IAAI,EAAE,KAAK,KAAK,CAAC,GAAG,cAAc,IAAI;IAChD;AACF","debugId":null}}]
}